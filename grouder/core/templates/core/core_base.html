<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- Fix the viewport typo and scale for proper mobile rendering -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://cdn.tailwindcss.com"></script>

    <title>{% block title %}{% endblock %} | Grouder</title>
  </head>

  <body class="min-h-screen flex flex-col">
    <!-- NAV -->
    <nav class="py-4 px-4 md:py-6 md:px-6 border-b border-gray-200">
      <div class="max-w-6xl mx-auto flex items-center justify-between">
        <a href="/" class="text-xl font-semibold">Grouder</a>

        <!-- Mobile menu button -->
        <button
          id="navToggle"
          class="inline-flex items-center justify-center md:hidden p-2 rounded-lg border border-gray-200"
          aria-controls="primaryNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <!-- Simple "hamburger" icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
               viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>

        <!-- Desktop nav -->
        <div id="primaryNav" class="hidden md:flex md:items-center md:space-x-4">
          <a href="{% url 'item:new' %}" class="text-base font-semibold hover:text-gray-500">New item</a>
          <a href="{% url 'item:items' %}" class="text-base font-semibold hover:text-gray-500">Browse</a>

          {% if request.user.is_authenticated %}
            <a href="{% url 'conversation:inbox' %}" class="px-4 py-2 text-base font-semibold bg-teal-500 text-white rounded-xl hover:bg-teal-700">Inbox</a>
            <a href="{% url 'dashboard:index' %}" class="px-4 py-2 text-base font-semibold bg-gray-500 text-white rounded-xl hover:bg-gray-700">Dashboard</a>
            <a href="{% url 'core:logout' %}" class="px-4 py-2 text-base font-semibold bg-red-500 text-white rounded-xl hover:bg-gray-700">Log out</a>
          {% else %}
            <!-- Fix typo: "Sing up" -> "Sign up" -->
            <a href="{% url 'core:signup' %}" class="px-4 py-2 text-base font-semibold bg-teal-500 text-white rounded-xl hover:bg-teal-700">Sign up</a>
            <a href="{% url 'core:login' %}" class="px-4 py-2 text-base font-semibold bg-gray-500 text-white rounded-xl hover:bg-gray-700">Log in</a>
          {% endif %}
        </div>
      </div>

      <!-- Mobile dropdown (collapses below md) -->
      <div id="mobileNav"
           class="md:hidden hidden mt-3 space-y-3 px-2">
        <a href="{% url 'item:new' %}" class="block w-full px-4 py-3 rounded-lg bg-white border hover:bg-gray-50">New item</a>
        <a href="{% url 'item:items' %}" class="block w-full px-4 py-3 rounded-lg bg-white border hover:bg-gray-50">Browse</a>

        {% if request.user.is_authenticated %}
          <a href="{% url 'conversation:inbox' %}" class="block w-full px-4 py-3 rounded-lg bg-teal-500 text-white text-center hover:bg-teal-700">Inbox</a>
          <a href="{% url 'dashboard:index' %}" class="block w-full px-4 py-3 rounded-lg bg-gray-500 text-white text-center hover:bg-gray-700">Dashboard</a>
          <a href="{% url 'core:logout' %}" class="block w-full px-4 py-3 rounded-lg bg-red-500 text-white text-center hover:bg-gray-700">Log out</a>
        {% else %}
          <a href="{% url 'core:signup' %}" class="block w-full px-4 py-3 rounded-lg bg-teal-500 text-white text-center hover:bg-teal-700">Sign up</a>
          <a href="{% url 'core:login' %}" class="block w-full px-4 py-3 rounded-lg bg-gray-500 text-white text-center hover:bg-gray-700">Log in</a>
        {% endif %}
      </div>
    </nav>

    <!-- PAGE CONTENT -->
    <main class="flex-1 px-4 py-4 md:px-6 md:py-6">
      {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer class="py-8 px-4 md:px-6 bg-gray-800">
      <div class="max-w-6xl mx-auto flex flex-col md:flex-row md:justify-between gap-8">
        <div class="md:w-2/3 md:pr-10">
          <h3 class="mb-3 font-semibold text-gray-300">About</h3>
          <p class="text-base text-gray-400">Grouping buyers to pay less</p>
        </div>

        <div class="md:w-1/3">
          <h3 class="mb-3 font-semibold text-gray-300">Menu</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-base text-teal-400 hover:text-teal-300">About</a></li>
            <li><a href="{% url 'core:contact' %}" class="text-base text-teal-400 hover:text-teal-300">Contact</a></li>
            <li><a href="#" class="text-base text-teal-400 hover:text-teal-300">Privacy policy</a></li>
            <li><a href="#" class="text-base text-teal-400 hover:text-teal-300">Terms of use</a></li>
          </ul>
        </div>
      </div>
    </footer>

    <!-- Tiny, framework-free nav toggle -->
    <script>
      const btn = document.getElementById('navToggle');
      const mobile = document.getElementById('mobileNav');

      if (btn && mobile) {
        btn.addEventListener('click', () => {
          const isHidden = mobile.classList.contains('hidden');
          mobile.classList.toggle('hidden');
          btn.setAttribute('aria-expanded', String(isHidden));
        });
      }
    </script>
  </body>
</html>
